# 龙榆生先生纪念网站数据源代码说明

龙榆生先生纪念网站是开放源代码的项目。目前其代码在主流开放源代码网站 [GitHub](https://github.com/wmjordan/longyusheng.org)（国外） 和 [Gitee](https://gitee.com/longyusheng/longyusheng)（国内）上托管。

使用免费的 Visual Studio Code 可从上述托管站点克隆网站源代码。

在上述托管网站注册并登录，可在 *issues* 栏目提交关于网站的问题报告（如网站错别字）、内容建议等等。

## 代码语言及数据分类

龙榆生先生纪念网站的数据源代码均以 XML 语言编写，分为如下几类，使用 XSLT 文件通过程序转换为网站的网页。

各类 XML 文档均有对应的 XSD 架构文件，用以规范 XML 文件数据格式。

1. **文章**，架构文件为 *article.xsd*，有如下数据文件：
    * 封面.xml
    * 词学十讲.xml
    * 词学论文.xml
    * 中国韵文史.xml
    * 纪念专辑.xml
    * 新体歌曲.xml
    * 说明.xml
    * 其他.xml
2. **词选**，架构文件为 *tangsong-ci.xsd*，有如下数据文件：
    * 唐宋名家词选.xml
    * 近三百年名家词选.xml
3. **人物简传**，架构文件为 *人物介绍.xsd*，有如下数据文件：
    * 唐宋词家.xml
    * 近三百年词家.xml
4. **格律**，架构文件为 *tangsong-ci-format.xsd*
    * 包含 1 个数据文件：唐宋词格律.xml
5. **注释**，架构文件为 *note.xsd*
    * 包含 1 个数据文件：注释.xml
6. 索引文件，该文件是通过 XSLT 从上述 XML 文件生成的。在生成 HTML 网页时，使用索引文件提高 XSLT 的速度。
    * 包含 1 个数据文件：索引文件.xml

## XSLT 文件

XSLT 文件用于将 XML 文件转换为 HTML 文件，并生成 CHM 电子书的目录和索引。由于 XSLT 程序使用了不公开源代码的外部组件，因此，无法通过通用的 XSLT 程序执行转换。XSLT 文件供有意于研究 XML 文档的网站爱好者参考。

本网站所用的所有 XSLT 文件均存放在 *xsl* 目录下。

## XML 链接

网站 XML 文档中的“`链接`”采用自定义的语义定义“`xhref`”属性指向的内容，该属性通常以特定的符号（见下）开始，表示指向特定类型的内容。

* `#`：指向对应名称的词人生平传记，如 `<链接 xhref="#辛弃疾">稼轩</链接>`、`<链接 xhref="#">温庭筠</链接>`。
* `@`：指向对应名称的词人作品目录，如 `<链接 xhref="@欧阳修">六一词</链接>`、`<链接 xhref="@">刘禹锡</链接>`。
* `$`：指向对应“`正文`”元素“`id`”属性的词作，如 `<链接 xhref="$ly-fqw-zhuyiweilou">衣带渐宽终不悔，为伊消得人憔悴</链接>`。
* `?fmt=`：指向指定名称的格律，如 `<链接 xhref="?fmt=">兰陵王</链接>`、`<链接 xhref="?fmt=木兰花">木兰花慢</链接>`。
* `?f=`：指向对应 `fileID` 属性的“`档案文章`”，如 `<链接 xhref="?f=lys-zhuqiangchun"/>`、`<链接 xhref="?f=lecture2-1">近体诗格律简介</链接>`。
* `?a=`：指向对应 `archiveID` 属性的“`资料档案`”，如 `<链接 xhref="?a=zhongguoyunwenshi">中国韵文史</链接>`、`<链接 xhref="?a=cixueshijiang" />`。
* `?`：指向内容条目对应的注释，如 `<注释 关键字="?">谷城公</注释>`。

> 注：在 *common.xsl* 文件下的“`链接`”模板定义了对链接元素的转换规则。